<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cpp on Manchey Blog</title>
    <link>http://localhost:1313/tags/cpp/</link>
    <description>Recent content in Cpp on Manchey Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <copyright>© Manchey Lee 2024</copyright>
    <lastBuildDate>Wed, 25 Dec 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/cpp/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>CGraph调研</title>
      <link>http://localhost:1313/posts/2024/12/cgraph%E8%B0%83%E7%A0%94/</link>
      <pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/posts/2024/12/cgraph%E8%B0%83%E7%A0%94/</guid>
      <description>&lt;p&gt;repo：https://github.com/ChunelFeng/CGraph&lt;/p&gt;&#xA;&lt;h1 id=&#34;功能&#34;&gt;&#xA;  功能&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%8a%9f%e8%83%bd&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;建立依赖图关系gpipelinegnodet00t01&#34;&gt;&#xA;  建立依赖图关系：GPipeline、GNode（T00/T01）&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%bb%ba%e7%ab%8b%e4%be%9d%e8%b5%96%e5%9b%be%e5%85%b3%e7%b3%bbgpipelinegnodet00t01&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;一条pipeline是从头执行到尾的，其实是graph的概念，没有流水线的功能&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;status &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;registerGElement&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyNode2&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;b, {a}, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeB&amp;#34;&lt;/span&gt;);    &lt;span style=&#34;color:#75715e&#34;&gt;// 将名为nodeB，依赖a执行的node信息，注册入pipeline中&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;子图cluster--region类似subgraph互相可嵌套t02t03t04&#34;&gt;&#xA;  子图：Cluster / Region：类似subgraph，互相可嵌套（T02/T03/T04）&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%ad%90%e5%9b%becluster--region%e7%b1%bb%e4%bc%bcsubgraph%e4%ba%92%e7%9b%b8%e5%8f%af%e5%b5%8c%e5%a5%97t02t03t04&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;cluster：subgraph中的多个节点串行执行&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.chunel.cn/archives/cgraph-run-introduce&#34;&gt;http://www.chunel.cn/archives/cgraph-run-introduce&lt;/a&gt;&#xA;&lt;img src=&#34;assets/Pasted%20image%2020241225154105.png&#34; alt=&#34;|434&#34; /&gt;&#xA;&lt;img src=&#34;assets/Pasted%20image%2020241225154201.png&#34; alt=&#34;|588&#34; /&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;这个解释感觉有点奇怪，D/F未能并行执行是实现机制的问题，感觉不需要引入新的概念来解决。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;region：可以是DAG图&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;b_cluster &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;createGGroup&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;GCluster&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;createGNode&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyNode1&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;(GNodeInfo(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeB1&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)),    &lt;span style=&#34;color:#75715e&#34;&gt;// 创建名为nodeB1的node信息，并将其放入b_cluster中&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#x9; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;createGNode&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyNode1&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;(GNodeInfo(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeB2&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)),    &lt;span style=&#34;color:#75715e&#34;&gt;// 创建名为nodeB2且自循环3次的node信息，并将其放入b_cluster中&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&#x9; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;createGNode&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;MyNode2&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;(GNodeInfo(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nodeB3&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});    &lt;span style=&#34;color:#75715e&#34;&gt;// 创建cluster信息，包含了三个node信息&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    b_region &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pipeline&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;createGGroup&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;GRegion&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;({b1, b2, b3, b4});    &lt;span style=&#34;color:#75715e&#34;&gt;// 将 b1、b2、b3、b4 注册入b_region中&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;参数传递param-t05&#34;&gt;&#xA;  参数传递：param (T05)&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%8f%82%e6%95%b0%e4%bc%a0%e9%80%92param-t05&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;p&gt;相当于是一个map，同一个pipeline中各个节点共享的全局参数。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 创建&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;status &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; CGRAPH_CREATE_GPARAM(MyParam, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;param1&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 读取&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;auto&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; myParam &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; CGRAPH_GET_GPARAM_WITH_NO_EMPTY(MyParam, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;param1&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 写入&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;CGRAPH_PARAM_WRITE_CODE_BLOCK(myParam)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;条件选择condition-t06&#34;&gt;&#xA;  条件选择：Condition （T06）&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9d%a1%e4%bb%b6%e9%80%89%e6%8b%a9condition-t06&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;p&gt;根据&lt;code&gt;choose&lt;/code&gt;返回值，来决定下一步运行哪一个节点。&lt;/p&gt;&#xA;&lt;p&gt;choose函数里，可以通过param来获取到外界信息，做一些判断。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
